{
  "info": {
    "_postman_id": "specflux-api-collection",
    "name": "SpecFlux API",
    "description": "REST API for SpecFlux - AI-Powered Multi-Repo Development Orchestrator.\n\n## Authentication\nSupports two authentication methods:\n\n### 1. SpecFlux API Key (Recommended)\nUse a SpecFlux API key for CLI/automation:\n- Generate key in SpecFlux Settings > API Keys\n- Set `apiKey` variable in the environment\n- All requests automatically use Bearer token auth\n\n### 2. Firebase JWT Token\nUse Firebase for web/mobile apps:\n- Run \"Get Firebase Token\" to authenticate\n- Token is automatically saved to environment\n\n## Usage\n1. Import this collection and the environment file\n2. Set `apiKey` OR run Firebase auth to get a token\n3. All requests will use the available auth automatically",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{authToken}}",
        "type": "string"
      }
    ]
  },
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "exec": [
          "// Use API key if available, otherwise use Firebase token",
          "const apiKey = pm.environment.get('apiKey');",
          "const firebaseToken = pm.environment.get('authToken');",
          "",
          "if (apiKey && apiKey.startsWith('sfx_')) {",
          "    pm.request.headers.upsert({",
          "        key: 'Authorization',",
          "        value: 'Bearer ' + apiKey",
          "    });",
          "} else if (firebaseToken) {",
          "    pm.request.headers.upsert({",
          "        key: 'Authorization',",
          "        value: 'Bearer ' + firebaseToken",
          "    });",
          "}"
        ],
        "type": "text/javascript"
      }
    }
  ],
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:8090/api"
    },
    {
      "key": "firebaseEmulatorHost",
      "value": "localhost:9099"
    },
    {
      "key": "testEmail",
      "value": "dev@specflux.local"
    },
    {
      "key": "testPassword",
      "value": "devpass123"
    },
    {
      "key": "apiKey",
      "value": "",
      "description": "SpecFlux API key (sfx_...) - preferred auth method"
    },
    {
      "key": "authToken",
      "value": "",
      "description": "Firebase ID token - populated by auth requests"
    },
    {
      "key": "refreshToken",
      "value": ""
    },
    {
      "key": "projectRef",
      "value": "SPEC"
    },
    {
      "key": "userRef",
      "value": ""
    },
    {
      "key": "epicRef",
      "value": ""
    },
    {
      "key": "prdRef",
      "value": ""
    },
    {
      "key": "prdDocId",
      "value": ""
    },
    {
      "key": "taskRef",
      "value": ""
    },
    {
      "key": "releaseRef",
      "value": ""
    },
    {
      "key": "criteriaId",
      "value": ""
    },
    {
      "key": "apiKeyId",
      "value": ""
    }
  ],
  "item": [
    {
      "name": "1. Authentication",
      "description": "Authentication options. Use API Key (recommended) or Firebase JWT.",
      "item": [
        {
          "name": "Validate API Key",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    pm.test('API key is valid', function() {",
                  "        const response = pm.response.json();",
                  "        pm.expect(response.publicId).to.match(/^usr_/);",
                  "    });",
                  "    console.log('API key validated successfully');",
                  "} else if (pm.response.code === 401) {",
                  "    pm.test('API key is invalid or expired', function() {",
                  "        pm.expect.fail('Check your apiKey variable');",
                  "    });",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/users/me",
              "host": ["{{baseUrl}}"],
              "path": ["users", "me"]
            },
            "description": "Validate your SpecFlux API key by calling /users/me.\n\n**Setup:**\n1. Get API key from SpecFlux Settings > API Keys\n2. Set `apiKey` variable: `sfx_your_key_here`\n3. Run this request to validate"
          }
        },
        {
          "name": "Get Firebase Token (Emulator)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.idToken) {",
                  "        pm.environment.set('authToken', response.idToken);",
                  "        pm.environment.set('refreshToken', response.refreshToken);",
                  "        console.log('Firebase token saved to environment');",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"{{testEmail}}\",\n  \"password\": \"{{testPassword}}\",\n  \"returnSecureToken\": true\n}"
            },
            "url": {
              "raw": "http://{{firebaseEmulatorHost}}/identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=fake-api-key",
              "protocol": "http",
              "host": ["{{firebaseEmulatorHost}}"],
              "path": ["identitytoolkit.googleapis.com", "v1", "accounts:signInWithPassword"],
              "query": [
                {
                  "key": "key",
                  "value": "fake-api-key"
                }
              ]
            },
            "description": "Sign in with Firebase Emulator to get a JWT token.\n\nUse this if you don't have a SpecFlux API key."
          }
        },
        {
          "name": "Create Test User (Emulator)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.idToken) {",
                  "        pm.environment.set('authToken', response.idToken);",
                  "        pm.environment.set('refreshToken', response.refreshToken);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"{{testEmail}}\",\n  \"password\": \"{{testPassword}}\",\n  \"returnSecureToken\": true\n}"
            },
            "url": {
              "raw": "http://{{firebaseEmulatorHost}}/identitytoolkit.googleapis.com/v1/accounts:signUp?key=fake-api-key",
              "protocol": "http",
              "host": ["{{firebaseEmulatorHost}}"],
              "path": ["identitytoolkit.googleapis.com", "v1", "accounts:signUp"],
              "query": [
                {
                  "key": "key",
                  "value": "fake-api-key"
                }
              ]
            },
            "description": "Create a new test user in Firebase Emulator."
          }
        },
        {
          "name": "Refresh Token",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.id_token) {",
                  "        pm.environment.set('authToken', response.id_token);",
                  "        pm.environment.set('refreshToken', response.refresh_token);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"grant_type\": \"refresh_token\",\n  \"refresh_token\": \"{{refreshToken}}\"\n}"
            },
            "url": {
              "raw": "http://{{firebaseEmulatorHost}}/securetoken.googleapis.com/v1/token?key=fake-api-key",
              "protocol": "http",
              "host": ["{{firebaseEmulatorHost}}"],
              "path": ["securetoken.googleapis.com", "v1", "token"],
              "query": [
                {
                  "key": "key",
                  "value": "fake-api-key"
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "2. API Keys",
      "description": "Manage SpecFlux API keys for CLI/automation authentication.",
      "item": [
        {
          "name": "Create API Key",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    if (response.id) {",
                  "        pm.environment.set('apiKeyId', response.id);",
                  "        console.log('API Key ID saved:', response.id);",
                  "    }",
                  "    if (response.key) {",
                  "        console.log('IMPORTANT: Save this key, it will not be shown again!');",
                  "        console.log('Key:', response.key);",
                  "    }",
                  "    pm.test('API key created', function() {",
                  "        pm.expect(response.id).to.match(/^key_/);",
                  "        pm.expect(response.key).to.match(/^sfx_/);",
                  "    });",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Postman Test Key\",\n  \"expiresAt\": null\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/users/me/api-keys",
              "host": ["{{baseUrl}}"],
              "path": ["users", "me", "api-keys"]
            },
            "description": "Create a new API key.\n\n**IMPORTANT:** The full key is only shown once at creation. Save it immediately!\n\n**Fields:**\n- `name`: Display name (optional)\n- `expiresAt`: Expiration timestamp ISO 8601 (optional)"
          }
        },
        {
          "name": "List API Keys",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    pm.test('Returns array', function() {",
                  "        pm.expect(response).to.be.an('array');",
                  "    });",
                  "    if (response.length > 0) {",
                  "        pm.environment.set('apiKeyId', response[0].id);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/users/me/api-keys",
              "host": ["{{baseUrl}}"],
              "path": ["users", "me", "api-keys"]
            },
            "description": "List all API keys for the current user.\n\n**Note:** Full keys are NOT returned in list responses."
          }
        },
        {
          "name": "Revoke API Key",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/users/me/api-keys/{{apiKeyId}}",
              "host": ["{{baseUrl}}"],
              "path": ["users", "me", "api-keys", "{{apiKeyId}}"]
            },
            "description": "Revoke an API key.\n\nRevoked keys cannot be used for authentication."
          }
        }
      ]
    },
    {
      "name": "3. User Profile",
      "description": "User profile management.",
      "item": [
        {
          "name": "Get Current User (Me)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.publicId) {",
                  "        pm.environment.set('userRef', response.publicId);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/users/me",
              "host": ["{{baseUrl}}"],
              "path": ["users", "me"]
            },
            "description": "Get the current authenticated user's profile."
          }
        },
        {
          "name": "Update Current User",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"displayName\": \"John Doe\",\n  \"avatarUrl\": \"https://example.com/avatar.png\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/users/me",
              "host": ["{{baseUrl}}"],
              "path": ["users", "me"]
            }
          }
        },
        {
          "name": "Get User by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/users/{{userRef}}",
              "host": ["{{baseUrl}}"],
              "path": ["users", "{{userRef}}"]
            }
          }
        }
      ]
    },
    {
      "name": "4. Projects",
      "description": "Project management.",
      "item": [
        {
          "name": "List Projects",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.length > 0) {",
                  "        pm.environment.set('projectRef', response.data[0].projectKey || response.data[0].publicId);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/projects?limit=20",
              "host": ["{{baseUrl}}"],
              "path": ["projects"],
              "query": [
                {"key": "limit", "value": "20"},
                {"key": "cursor", "value": "", "disabled": true}
              ]
            }
          }
        },
        {
          "name": "Create Project",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    pm.environment.set('projectRef', response.projectKey || response.publicId);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"projectKey\": \"SPEC\",\n  \"name\": \"SpecFlux\",\n  \"description\": \"AI-Powered Multi-Repo Development Orchestrator\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/projects",
              "host": ["{{baseUrl}}"],
              "path": ["projects"]
            }
          }
        },
        {
          "name": "Get Project",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/projects/{{projectRef}}",
              "host": ["{{baseUrl}}"],
              "path": ["projects", "{{projectRef}}"]
            }
          }
        },
        {
          "name": "Update Project",
          "request": {
            "method": "PUT",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"SpecFlux Updated\",\n  \"description\": \"Updated description\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/projects/{{projectRef}}",
              "host": ["{{baseUrl}}"],
              "path": ["projects", "{{projectRef}}"]
            }
          }
        },
        {
          "name": "Delete Project",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/projects/{{projectRef}}",
              "host": ["{{baseUrl}}"],
              "path": ["projects", "{{projectRef}}"]
            }
          }
        }
      ]
    },
    {
      "name": "5. PRDs",
      "description": "Product Requirements Documents.",
      "item": [
        {
          "name": "List PRDs",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.length > 0) {",
                  "        pm.environment.set('prdRef', response.data[0].id);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/projects/{{projectRef}}/prds?limit=20",
              "host": ["{{baseUrl}}"],
              "path": ["projects", "{{projectRef}}", "prds"],
              "query": [
                {"key": "limit", "value": "20"},
                {"key": "status", "value": "", "disabled": true}
              ]
            }
          }
        },
        {
          "name": "Create PRD",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    pm.environment.set('prdRef', response.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Authentication System\",\n  \"description\": \"User authentication with OAuth2\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/projects/{{projectRef}}/prds",
              "host": ["{{baseUrl}}"],
              "path": ["projects", "{{projectRef}}", "prds"]
            }
          }
        },
        {
          "name": "Get PRD",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/projects/{{projectRef}}/prds/{{prdRef}}",
              "host": ["{{baseUrl}}"],
              "path": ["projects", "{{projectRef}}", "prds", "{{prdRef}}"]
            }
          }
        },
        {
          "name": "Update PRD",
          "request": {
            "method": "PUT",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Authentication System - Updated\",\n  \"status\": \"APPROVED\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/projects/{{projectRef}}/prds/{{prdRef}}",
              "host": ["{{baseUrl}}"],
              "path": ["projects", "{{projectRef}}", "prds", "{{prdRef}}"]
            }
          }
        },
        {
          "name": "Delete PRD",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/projects/{{projectRef}}/prds/{{prdRef}}",
              "host": ["{{baseUrl}}"],
              "path": ["projects", "{{projectRef}}", "prds", "{{prdRef}}"]
            }
          }
        },
        {
          "name": "Add Document to PRD",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    if (response.documents && response.documents.length > 0) {",
                  "        pm.environment.set('prdDocId', response.documents[response.documents.length - 1].id);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"fileName\": \"prd.md\",\n  \"filePath\": \".specflux/prds/auth-system/prd.md\",\n  \"documentType\": \"PRD\",\n  \"isPrimary\": true\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/projects/{{projectRef}}/prds/{{prdRef}}/documents",
              "host": ["{{baseUrl}}"],
              "path": ["projects", "{{projectRef}}", "prds", "{{prdRef}}", "documents"]
            }
          }
        },
        {
          "name": "Update Document",
          "request": {
            "method": "PUT",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"documentType\": \"WIREFRAME\",\n  \"isPrimary\": false\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/projects/{{projectRef}}/prds/{{prdRef}}/documents/{{prdDocId}}",
              "host": ["{{baseUrl}}"],
              "path": ["projects", "{{projectRef}}", "prds", "{{prdRef}}", "documents", "{{prdDocId}}"]
            }
          }
        },
        {
          "name": "Delete Document",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/projects/{{projectRef}}/prds/{{prdRef}}/documents/{{prdDocId}}",
              "host": ["{{baseUrl}}"],
              "path": ["projects", "{{projectRef}}", "prds", "{{prdRef}}", "documents", "{{prdDocId}}"]
            }
          }
        }
      ]
    },
    {
      "name": "6. Epics",
      "description": "Epic management with acceptance criteria.",
      "item": [
        {
          "name": "List Epics",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.length > 0) {",
                  "        pm.environment.set('epicRef', response.data[0].id || response.data[0].publicId);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/projects/{{projectRef}}/epics?limit=50",
              "host": ["{{baseUrl}}"],
              "path": ["projects", "{{projectRef}}", "epics"],
              "query": [
                {"key": "limit", "value": "50"},
                {"key": "status", "value": "", "disabled": true},
                {"key": "prdRef", "value": "", "disabled": true},
                {"key": "releaseRef", "value": "", "disabled": true}
              ]
            }
          }
        },
        {
          "name": "Create Epic",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    pm.environment.set('epicRef', response.id || response.publicId);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"User Authentication\",\n  \"description\": \"Implement complete user authentication flow\",\n  \"prdRef\": \"{{prdRef}}\",\n  \"acceptanceCriteria\": [\n    {\"criteria\": \"Users can sign up with email/password\"},\n    {\"criteria\": \"Users can log in with existing credentials\"}\n  ]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/projects/{{projectRef}}/epics",
              "host": ["{{baseUrl}}"],
              "path": ["projects", "{{projectRef}}", "epics"]
            },
            "description": "Create an epic with acceptance criteria.\n\n**Required:**\n- `title`\n- `acceptanceCriteria` (array of objects with `criteria` property)\n\n**Optional:**\n- `prdRef`: Link to source PRD\n- `releaseRef`: Assign to release"
          }
        },
        {
          "name": "Get Epic",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/projects/{{projectRef}}/epics/{{epicRef}}",
              "host": ["{{baseUrl}}"],
              "path": ["projects", "{{projectRef}}", "epics", "{{epicRef}}"]
            }
          }
        },
        {
          "name": "Update Epic",
          "request": {
            "method": "PUT",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"User Authentication - Updated\",\n  \"status\": \"IN_PROGRESS\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/projects/{{projectRef}}/epics/{{epicRef}}",
              "host": ["{{baseUrl}}"],
              "path": ["projects", "{{projectRef}}", "epics", "{{epicRef}}"]
            }
          }
        },
        {
          "name": "Delete Epic",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/projects/{{projectRef}}/epics/{{epicRef}}",
              "host": ["{{baseUrl}}"],
              "path": ["projects", "{{projectRef}}", "epics", "{{epicRef}}"]
            }
          }
        },
        {
          "name": "List Epic Acceptance Criteria",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.length > 0) {",
                  "        pm.environment.set('criteriaId', response.data[0].id);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/projects/{{projectRef}}/epics/{{epicRef}}/acceptance-criteria",
              "host": ["{{baseUrl}}"],
              "path": ["projects", "{{projectRef}}", "epics", "{{epicRef}}", "acceptance-criteria"]
            }
          }
        },
        {
          "name": "Add Epic Acceptance Criteria",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    pm.environment.set('criteriaId', response.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"criteria\": \"Password reset via email works\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/projects/{{projectRef}}/epics/{{epicRef}}/acceptance-criteria",
              "host": ["{{baseUrl}}"],
              "path": ["projects", "{{projectRef}}", "epics", "{{epicRef}}", "acceptance-criteria"]
            }
          }
        },
        {
          "name": "Update Epic Acceptance Criteria",
          "request": {
            "method": "PUT",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"criteria\": \"Updated criteria text\",\n  \"isMet\": true\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/projects/{{projectRef}}/epics/{{epicRef}}/acceptance-criteria/{{criteriaId}}",
              "host": ["{{baseUrl}}"],
              "path": ["projects", "{{projectRef}}", "epics", "{{epicRef}}", "acceptance-criteria", "{{criteriaId}}"]
            }
          }
        },
        {
          "name": "Delete Epic Acceptance Criteria",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/projects/{{projectRef}}/epics/{{epicRef}}/acceptance-criteria/{{criteriaId}}",
              "host": ["{{baseUrl}}"],
              "path": ["projects", "{{projectRef}}", "epics", "{{epicRef}}", "acceptance-criteria", "{{criteriaId}}"]
            }
          }
        }
      ]
    },
    {
      "name": "7. Tasks",
      "description": "Task management with acceptance criteria and dependencies.",
      "item": [
        {
          "name": "List Tasks",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.length > 0) {",
                  "        pm.environment.set('taskRef', response.data[0].id || response.data[0].publicId);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/projects/{{projectRef}}/tasks?limit=50",
              "host": ["{{baseUrl}}"],
              "path": ["projects", "{{projectRef}}", "tasks"],
              "query": [
                {"key": "limit", "value": "50"},
                {"key": "status", "value": "", "disabled": true},
                {"key": "epicRef", "value": "", "disabled": true},
                {"key": "priority", "value": "", "disabled": true}
              ]
            }
          }
        },
        {
          "name": "Create Task",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    pm.environment.set('taskRef', response.id || response.publicId);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Implement login form\",\n  \"description\": \"Create React login form with email/password\",\n  \"epicRef\": \"{{epicRef}}\",\n  \"priority\": \"HIGH\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/projects/{{projectRef}}/tasks",
              "host": ["{{baseUrl}}"],
              "path": ["projects", "{{projectRef}}", "tasks"]
            }
          }
        },
        {
          "name": "Get Task",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/projects/{{projectRef}}/tasks/{{taskRef}}",
              "host": ["{{baseUrl}}"],
              "path": ["projects", "{{projectRef}}", "tasks", "{{taskRef}}"]
            }
          }
        },
        {
          "name": "Update Task",
          "request": {
            "method": "PATCH",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"status\": \"IN_PROGRESS\",\n  \"priority\": \"CRITICAL\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/projects/{{projectRef}}/tasks/{{taskRef}}",
              "host": ["{{baseUrl}}"],
              "path": ["projects", "{{projectRef}}", "tasks", "{{taskRef}}"]
            }
          }
        },
        {
          "name": "Delete Task",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/projects/{{projectRef}}/tasks/{{taskRef}}",
              "host": ["{{baseUrl}}"],
              "path": ["projects", "{{projectRef}}", "tasks", "{{taskRef}}"]
            }
          }
        },
        {
          "name": "List Task Acceptance Criteria",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.length > 0) {",
                  "        pm.environment.set('criteriaId', response.data[0].id);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/projects/{{projectRef}}/tasks/{{taskRef}}/acceptance-criteria",
              "host": ["{{baseUrl}}"],
              "path": ["projects", "{{projectRef}}", "tasks", "{{taskRef}}", "acceptance-criteria"]
            }
          }
        },
        {
          "name": "Add Task Acceptance Criteria",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    pm.environment.set('criteriaId', response.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"criteria\": \"Form validates email format\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/projects/{{projectRef}}/tasks/{{taskRef}}/acceptance-criteria",
              "host": ["{{baseUrl}}"],
              "path": ["projects", "{{projectRef}}", "tasks", "{{taskRef}}", "acceptance-criteria"]
            }
          }
        },
        {
          "name": "Update Task Acceptance Criteria",
          "request": {
            "method": "PUT",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"isMet\": true\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/projects/{{projectRef}}/tasks/{{taskRef}}/acceptance-criteria/{{criteriaId}}",
              "host": ["{{baseUrl}}"],
              "path": ["projects", "{{projectRef}}", "tasks", "{{taskRef}}", "acceptance-criteria", "{{criteriaId}}"]
            }
          }
        },
        {
          "name": "Delete Task Acceptance Criteria",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/projects/{{projectRef}}/tasks/{{taskRef}}/acceptance-criteria/{{criteriaId}}",
              "host": ["{{baseUrl}}"],
              "path": ["projects", "{{projectRef}}", "tasks", "{{taskRef}}", "acceptance-criteria", "{{criteriaId}}"]
            }
          }
        },
        {
          "name": "List Task Dependencies",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/projects/{{projectRef}}/tasks/{{taskRef}}/dependencies",
              "host": ["{{baseUrl}}"],
              "path": ["projects", "{{projectRef}}", "tasks", "{{taskRef}}", "dependencies"]
            }
          }
        },
        {
          "name": "Add Task Dependency",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"dependsOnTaskRef\": \"SPEC-41\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/projects/{{projectRef}}/tasks/{{taskRef}}/dependencies",
              "host": ["{{baseUrl}}"],
              "path": ["projects", "{{projectRef}}", "tasks", "{{taskRef}}", "dependencies"]
            },
            "description": "Add a dependency - this task depends on another task."
          }
        },
        {
          "name": "Remove Task Dependency",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/projects/{{projectRef}}/tasks/{{taskRef}}/dependencies/{{dependsOnTaskRef}}",
              "host": ["{{baseUrl}}"],
              "path": ["projects", "{{projectRef}}", "tasks", "{{taskRef}}", "dependencies", "{{dependsOnTaskRef}}"]
            }
          }
        }
      ]
    },
    {
      "name": "8. Releases",
      "description": "Release/milestone management.",
      "item": [
        {
          "name": "List Releases",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.length > 0) {",
                  "        pm.environment.set('releaseRef', response.data[0].publicId);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/projects/{{projectRef}}/releases?limit=20",
              "host": ["{{baseUrl}}"],
              "path": ["projects", "{{projectRef}}", "releases"],
              "query": [
                {"key": "limit", "value": "20"},
                {"key": "status", "value": "", "disabled": true}
              ]
            }
          }
        },
        {
          "name": "Create Release",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    pm.environment.set('releaseRef', response.publicId);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"v1.0.0\",\n  \"description\": \"Initial release\",\n  \"targetDate\": \"2025-03-01\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/projects/{{projectRef}}/releases",
              "host": ["{{baseUrl}}"],
              "path": ["projects", "{{projectRef}}", "releases"]
            }
          }
        },
        {
          "name": "Get Release",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/projects/{{projectRef}}/releases/{{releaseRef}}",
              "host": ["{{baseUrl}}"],
              "path": ["projects", "{{projectRef}}", "releases", "{{releaseRef}}"]
            }
          }
        },
        {
          "name": "Update Release",
          "request": {
            "method": "PUT",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"v1.0.0-rc1\",\n  \"status\": \"IN_PROGRESS\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/projects/{{projectRef}}/releases/{{releaseRef}}",
              "host": ["{{baseUrl}}"],
              "path": ["projects", "{{projectRef}}", "releases", "{{releaseRef}}"]
            }
          }
        },
        {
          "name": "Delete Release",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/projects/{{projectRef}}/releases/{{releaseRef}}",
              "host": ["{{baseUrl}}"],
              "path": ["projects", "{{projectRef}}", "releases", "{{releaseRef}}"]
            }
          }
        }
      ]
    }
  ]
}
