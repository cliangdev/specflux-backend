#!/bin/sh

# Prevent pushing directly to main branch
protected_branch="main"

while read local_ref local_sha remote_ref remote_sha; do
    if echo "$remote_ref" | grep -q "refs/heads/$protected_branch"; then
        echo "Error: Direct push to '$protected_branch' branch is not allowed."
        echo "Please create a feature branch and open a pull request."
        exit 1
    fi
done

exit 0
