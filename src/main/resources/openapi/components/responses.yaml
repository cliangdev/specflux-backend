components:
  schemas:
    ErrorResponse:
      type: object
      properties:
        error:
          type: string
          description: Human-readable error message
          example: "Project not found"
        code:
          type: string
          description: Machine-readable error code
          example: "NOT_FOUND"
      required:
        - error
        - code

    ValidationError:
      type: object
      properties:
        error:
          type: string
          example: "Validation failed"
        code:
          type: string
          example: "VALIDATION_ERROR"
        details:
          type: array
          items:
            type: object
            properties:
              field:
                type: string
                example: "projectKey"
              message:
                type: string
                example: "must be between 2 and 10 characters"
      required:
        - error
        - code

  responses:
    BadRequest:
      description: Bad request - validation error or invalid input
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ValidationError'
          example:
            error: "Validation failed"
            code: "VALIDATION_ERROR"
            details:
              - field: "projectKey"
                message: "must be between 2 and 10 characters"

    Unauthorized:
      description: Unauthorized - missing or invalid authentication token
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            error: "Authentication required"
            code: "UNAUTHORIZED"

    Forbidden:
      description: Forbidden - insufficient permissions
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            error: "You don't have permission to access this resource"
            code: "FORBIDDEN"

    NotFound:
      description: Resource not found
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            error: "Project not found"
            code: "NOT_FOUND"

    Conflict:
      description: Conflict - resource already exists
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            error: "Project with key 'SPEC' already exists"
            code: "CONFLICT"

    InternalServerError:
      description: Internal server error
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            error: "An unexpected error occurred"
            code: "INTERNAL_ERROR"

  parameters:
    CursorParam:
      name: cursor
      in: query
      description: Base64-encoded pagination cursor
      schema:
        type: string
      example: "eyJpZCI6MTAsInNvcnRWYWx1ZSI6IjIwMjQtMTItMDFUMTQ6MzA6MDBaIn0="

    LimitParam:
      name: limit
      in: query
      description: Number of items per page (default 20, max 100)
      schema:
        type: integer
        minimum: 1
        maximum: 100
        default: 20

    SortParam:
      name: sort
      in: query
      description: Field to sort by
      schema:
        type: string
        enum: [created_at, updated_at, title, status]
        default: created_at

    OrderParam:
      name: order
      in: query
      description: Sort order
      schema:
        type: string
        enum: [asc, desc]
        default: desc
